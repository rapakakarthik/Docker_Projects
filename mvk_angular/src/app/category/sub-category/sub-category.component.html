<div class="main-container">
  <!-- Top Banner Details -->
  <div class="images-slider-two">
    <section
      *ngIf="!categoryLoad && category_details"
      class="img-container banner-img"
      [ngStyle]="{
        'background-image': 'url(' + setImageEncode(category_details.category_banner_image) + ')',
      }"
      >
      <!-- 'background-color': '#DAF3FB', -->
      <!-- 'background-image': category_details.category_banner_image -->
    <div class="d-flex align-items-center justify-content-center w-100 ">
      <!-- <img [src]="category_details.category_icon"/> -->
      <div>
        <h1 [style.color]="category_details.banner_title_color" class="h-sliders">{{ category_details.banner_title || category_details.category_name }}</h1>
        <p [style.color]="category_details.tagline_color" class="p-slider mb-0 mt-2">{{ category_details.banner_tagline}}</p>
      </div>
    </div>
    </section> 
  </div>
</div>

<section class="v3_breadcrumb">
  <div class="main-container">
    <ul class="list">
      <li>
        <a routerLink="/">Home</a>
      </li>
      @if (category_details) {
        <li class="active">{{ category_details.category_name }}</li>
      }
    </ul>
  </div>
</section>

<!-- Main Section -->
<section class="main-container">
  <!-- Source By Category carousel -->
  <ng-container *ngIf="leastCats && leastCats.length > 0">
    <h2 #productsView class="mainTitle">Source By Category</h2>
    <app-multi-carousel class="cat-data" [catData]="catData" [leastCats]="leastCats"></app-multi-carousel>
  </ng-container>
  <!-- Source By Category carousel Loader -->
  <ng-container *ngIf="categoryLoad">
    <section class="smart img-container"></section>
    <ul class="listloader">
      <li *ngFor="let i of [0, 1, 2, 3, 4, 5, 6, 7]">
        <span class="smart list1"></span>
      </li>
    </ul>
  </ng-container>

   <!-- new code Products Spotlight -->
  <section *ngIf="topProductTypes.length > 0" class="v3_spotlight sm_space">
    <section class="scrollinmobile">
      <h2 *ngIf="topProductTitle" class="mainTitle">
        <span>{{topProductTitle}}</span>
      </h2>
      <section class="flex-wrap">
        <section class="flex-list" *ngFor="let type of topProductTypes">
          <h2 [routerLink]="['/category/topranking', type.key, 1]" class="smallTitle pointer"><span>{{type.type}}</span></h2>
          <h3 *ngIf="type.parent_category_id != 0" [routerLink]="['/category/topranking', type.key, type.parent_category_id]" class="SmallSubTitle pointer">{{type.parent_category}}</h3>
          <!-- <h3 [routerLink]="['category/topranking', type.key, 10]" class="SmallSubTitle">{{type.tag_line}}</h3> -->
          <section class="images-list">
            <section *ngIf="type.images[0].image_type == 'main'">
              <a [routerLink]="['/category', type.key, type.images[0].link_id]" class="imageBlock left_img">
                <img [src]="type.images[0].image" [appSafeImage]="'https://dev-api.myverkoper.com/assets/seller/images/mvk-no-image.png'"/>
              </a>
            </section>
            <section>
              <ng-container *ngFor="let image of type.images">
                <a *ngIf="image.image_type == 'sub'" [routerLink]="['/category', type.key, image.link_id]" class="imageBlock">
                  <img [src]="image.image" [appSafeImage]="'https://dev-api.myverkoper.com/assets/seller/images/mvk-no-image.png'"/>
                </a>
              </ng-container>
              <!-- <ng-container>
                <a class="imageBlock">
                  <img src="/assets/images/dummy_product.jpg"/>
                </a>
              </ng-container> -->
            </section>
          </section>
        </section>
      </section>
  
    </section>
  </section>
  <!-- new code Products Spotlight End-->

  <!-- Products Spotlight -->
  <!-- <section>
    <h2 *ngIf="newProductTitle" class="product-heading-in smallTitle">
      <span class="pointer" (click)="goTo('top_search')">{{newProductTitle}}</span>
      <mat-icon (click)="goTo('top_search')">arrow_forward</mat-icon>
    </h2>

    <div *ngIf="newProductInfo" class="hometabs newhometab">
      <ng-container *ngFor="let type of newProductInfo; let i = index">
        <mat-chip-option [class.selected]="selectedChipIndex === i" (click)="tabChange(type.id, i)">
          {{ type.value }}
        </mat-chip-option>
      </ng-container>
    </div>
    <section *ngIf="newProductLoader" class="flex-wrap">
      <section *ngFor="let i of [0, 0, 0]" class="loader-wrap-2">
        <section><span class="smart titletext"></span></section>
        <section class="manu-loader-2">
          <section class="loader-img img-ld">
            <section class="text-img"></section>
            <section class="text-img"></section>
            <section class="text-img"></section>
          </section>
        </section>
      </section>
    </section>


    <section class="flex-wrap " *ngIf="newProductData && newProductData.length > 0">
      <ng-container *ngFor="let product of newProductData">
        <section class="flex-list" *ngIf="product.products.length > 0">
          <h2 class="smallTitle w-850">
            <span class="pointer" (click)="gotonavigation(product)">{{ product.cat_name }}</span>
            <mat-icon (click)="gotonavigation(product)">arrow_forward</mat-icon>
          </h2>

          <section class="cardsWarp">
            <ng-container *ngFor="let item of product.products.slice(0, 3)">
              <app-item-card [recomendationItems]="item" [linkTo]="'/recommendations'"
                class="itemBlocks"></app-item-card>
            </ng-container>
          </section>
        </section>
      </ng-container>
    </section>
    
    
  </section> -->
  
  <!-- Products Spotlight End -->

  <!-- Top Ranking Manufactures -->
  <section *ngIf="topCompanyTypes.length > 0" class="flex-wrap companycarosal mt-3">
    <h2 class="product-heading-in smallTitle">
      {{ topCompanyTitle }}
    </h2>
    <section class="customx-flexs-list6">
      <section class="innerflex">
        <owl-carousel-o [options]="customOptions2" class="productscarousel">
          <ng-container *ngFor="let type of topCompanyTypes">
            <ng-template carouselSlide>
              <app-top-supplier-type [type]="type" class="card1"></app-top-supplier-type>
            </ng-template>
          </ng-container>
        </owl-carousel-o>
      </section>
    </section>
  </section>
  <!-- Loader -->
  <section *ngIf="recommendSupplierLoad" class="loader-wrap mobilehomeload">
    <section *ngFor="let i of [1, 2, 3, 4, 5]" class="manu-loader">
      <section class="loader-img">
        <section class="text-img"></section>
      </section>
      <section class="loader-desc">
        <section class="smart text"></section>
      </section>
    </section>
  </section>

  <!-- Request Quotation -->
  <section class="req_quotation sm_space">
    <div (click)="goToRfqQuote()" class="row align-items-center">
      <div class="col-sm-7">
        <div class="d-flex align-items-center">
          <div>
            <svg width="45" height="45" viewBox="0 0 45 45" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M30.5363 13.5278C30.5178 13.5093 30.4901 13.4816 30.4716 13.4631C30.5271 13.4446 30.5548 13.4723 30.5363 13.5278Z" fill="#FDFEFE"/>
              <path d="M16.9895 28.3172C17.008 28.3357 17.0357 28.3635 17.0542 28.382C16.9987 28.4005 16.9802 28.3727 16.9895 28.3172Z" fill="#FDFEFE"/>
              <path d="M30.4716 28.382C30.4901 28.3635 30.5178 28.3357 30.5363 28.3172C30.5548 28.3727 30.5271 28.4005 30.4716 28.382Z" fill="#FDFEFE"/>
              <path d="M9.41231 22.606C9.41231 17.8892 9.42991 13.1812 9.40351 8.46441C9.39471 7.16201 10.4419 6.11481 11.7443 6.12361C17.3411 6.15881 22.9379 6.14121 28.5347 6.13241C29.2651 6.13241 29.8547 6.37001 30.3651 6.88041C32.6267 9.15961 34.8971 11.43 37.1763 13.7004C37.6867 14.2108 37.9331 14.8004 37.9331 15.5396C37.9243 22.6148 37.9155 29.6812 37.9419 36.7564C37.9507 38.0588 36.9211 39.1236 35.5747 39.1148C27.6371 39.0884 19.6995 39.0884 11.7619 39.1148C10.4419 39.1236 9.38591 38.0764 9.39471 36.7564C9.42991 32.0396 9.41231 27.3228 9.41231 22.606ZM11.6035 22.6148C11.6035 27.27 11.6035 31.934 11.5947 36.5892C11.5947 36.8444 11.6475 36.906 11.9115 36.906C19.7435 36.8972 27.5843 36.8972 35.4163 36.906C35.6715 36.906 35.7331 36.8444 35.7331 36.5892C35.7243 30.2004 35.7243 23.8204 35.7331 17.4316C35.7331 17.1764 35.6715 17.1148 35.4163 17.1148C33.7179 17.1236 32.0107 17.1236 30.3123 17.1236C28.9923 17.1236 28.0507 16.182 28.0507 14.862C28.0507 12.8028 28.0419 10.7436 28.0595 8.68441C28.0595 8.40281 27.9979 8.33241 27.7075 8.33241C22.4539 8.34121 17.2003 8.34121 11.9467 8.33241C11.6651 8.33241 11.5947 8.39401 11.5947 8.68441C11.6035 13.322 11.6035 17.9684 11.6035 22.6148ZM35.1347 14.9236C33.5067 13.2956 31.8699 11.65 30.2507 10.0308C30.2507 11.562 30.2507 13.1548 30.2507 14.7388C30.2507 14.8972 30.3035 14.9324 30.4443 14.9236C32.0195 14.9236 33.6035 14.9236 35.1347 14.9236Z" fill="white"/>
              <path d="M15.5692 29.0804V22.535H18.0237C18.5265 22.535 18.9484 22.6223 19.2893 22.797C19.6324 22.9717 19.8912 23.2168 20.066 23.5321C20.2428 23.8453 20.3312 24.2107 20.3312 24.6284C20.3312 25.0481 20.2417 25.4124 20.0628 25.7214C19.8859 26.0282 19.6249 26.2658 19.2797 26.4341C18.9346 26.6003 18.5106 26.6834 18.0077 26.6834H16.2595V25.699H17.8479C18.142 25.699 18.3827 25.6585 18.5702 25.5776C18.7577 25.4945 18.8962 25.3741 18.9857 25.2164C19.0773 25.0566 19.1231 24.8606 19.1231 24.6284C19.1231 24.3961 19.0773 24.198 18.9857 24.0339C18.8941 23.8677 18.7545 23.742 18.567 23.6568C18.3795 23.5694 18.1377 23.5257 17.8415 23.5257H16.7549V29.0804H15.5692ZM18.9505 26.1145L20.5709 29.0804H19.2478L17.6562 26.1145H18.9505ZM21.4227 29.0804V22.535H25.6159V23.5289H22.6084V25.3059H25.3282V26.2999H22.6084V29.0804H21.4227ZM29.1347 26.8816H30.2085L30.8445 27.7061L31.2984 28.2431L32.3882 29.6429H31.2377L30.4962 28.7033L30.1798 28.2558L29.1347 26.8816ZM32.5448 25.8077C32.5448 26.5129 32.4127 27.117 32.1485 27.6198C31.8864 28.1205 31.5285 28.5041 31.0747 28.7704C30.623 29.0367 30.1105 29.1699 29.5374 29.1699C28.9642 29.1699 28.4507 29.0367 27.9969 28.7704C27.5452 28.5019 27.1872 28.1173 26.923 27.6166C26.661 27.1138 26.5299 26.5108 26.5299 25.8077C26.5299 25.1024 26.661 24.4994 26.923 23.9987C27.1872 23.4959 27.5452 23.1113 27.9969 22.845C28.4507 22.5786 28.9642 22.4455 29.5374 22.4455C30.1105 22.4455 30.623 22.5786 31.0747 22.845C31.5285 23.1113 31.8864 23.4959 32.1485 23.9987C32.4127 24.4994 32.5448 25.1024 32.5448 25.8077ZM31.3527 25.8077C31.3527 25.3112 31.2749 24.8926 31.1194 24.5516C30.966 24.2086 30.7529 23.9497 30.4802 23.775C30.2075 23.5982 29.8932 23.5097 29.5374 23.5097C29.1815 23.5097 28.8673 23.5982 28.5945 23.775C28.3218 23.9497 28.1077 24.2086 27.9521 24.5516C27.7987 24.8926 27.722 25.3112 27.722 25.8077C27.722 26.3041 27.7987 26.7239 27.9521 27.0669C28.1077 27.4078 28.3218 27.6667 28.5945 27.8436C28.8673 28.0183 29.1815 28.1056 29.5374 28.1056C29.8932 28.1056 30.2075 28.0183 30.4802 27.8436C30.7529 27.6667 30.966 27.4078 31.1194 27.0669C31.2749 26.7239 31.3527 26.3041 31.3527 25.8077Z" fill="white"/>
            </svg>
          </div>
          <div class="ps-3">
            <h1>Request For Quotation</h1>
            <p class="d-none d-md-block">Optimizes Purchasing with Targeted Supplier Bids</p>
            <p class="d-block d-md-none">One Request Multiple Quotes</p>
          </div>
          <div class="d-block d-md-none">
            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="15" viewBox="0 0 14 15" fill="none">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M4.93709 1.66615L10.0072 6.74535C10.0528 6.78896 10.089 6.84146 10.1136 6.89961C10.1382 6.95776 10.1505 7.02033 10.15 7.08345C10.1502 7.21372 10.0988 7.33878 10.0072 7.43135C8.17319 9.22055 6.40569 10.9475 4.70469 12.6121C4.61719 12.694 4.26719 12.8977 3.99699 12.5953C3.72679 12.2922 3.89059 12.0283 3.99699 11.9191L8.94459 7.08345L4.22169 2.35215C4.04949 2.11485 4.06349 1.89575 4.26369 1.69485C4.46389 1.49395 4.68859 1.48415 4.93709 1.66615Z" fill="white" fill-opacity="0.6"/>
            </svg>
          </div>
        </div>
      </div>
      <div class="col-sm-5 text-center text-md-end mt-4 mt-md-0 d-none d-md-block">
        <button (click)="$event.stopPropagation(); goToRfqQuote()" class="rfq_btn">Post RFQ</button>
      </div>
    </div>
  </section>
  <!-- Request Quotation End -->

  <!-- Products -->
  <section *ngIf="productData && productData.length" class="flex-wrap">
    <h2  class="mainTitle">Products</h2>
    <section class="cardsWarp custom-flexs-list6 sub_catproducts">
      <ng-container *ngFor="let data of productData | paginate:{ itemsPerPage: 12, currentPage: p, totalItems: totalProducts }">
        <section class="card1">
          <app-product-card
            [styleClass]="'smallcard'"
            [item]="data"
            [description]="true"
            [price]="true"
            [qty]="true"
            [linkTo]="'subCategory'"
          ></app-product-card>
        </section>
      </ng-container>
    </section>
    <section *ngIf="productData.length > 12" class="paginaton">
      <pagination-controls [maxSize]="5" (pageChange)="onPageChange($event)"></pagination-controls>    
    </section>
  </section>
  <br/>
  <!-- Product Loader -->
  <section *ngIf="productLoad" class="flex-wrap marT30">
    <h2 class="smallTitle smart titlesmart"></h2>
    <section class="cardsWarp custom-flexs-list6">
      <section
        class="card1"
        *ngFor="let i of [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]"
      >
        <section class="smart boxsmart"></section>
      </section>
    </section>
  </section>